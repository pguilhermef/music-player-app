{"ast":null,"code":"import _toConsumableArray from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";var FAVORITE_SONGS_KEY='favorite_songs';var TIMEOUT=500;var SUCCESS_STATUS='OK';if(!JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY))){localStorage.setItem(FAVORITE_SONGS_KEY,JSON.stringify([]));}var readFavoriteSongs=function readFavoriteSongs(){return JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY));};var saveFavoriteSongs=function saveFavoriteSongs(favoriteSongs){return localStorage.setItem(FAVORITE_SONGS_KEY,JSON.stringify(favoriteSongs));};// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso futuramente.\n// --------------------------------------------------------------------\nvar simulateRequest=function simulateRequest(response){return function(callback){setTimeout(function(){callback(response);},TIMEOUT);};};export var getFavoriteSongs=function getFavoriteSongs(){return new Promise(function(resolve){var favoriteSongs=readFavoriteSongs();simulateRequest(favoriteSongs)(resolve);});};export var addSong=function addSong(song){return new Promise(function(resolve){if(song){var favoriteSongs=readFavoriteSongs();saveFavoriteSongs([].concat(_toConsumableArray(favoriteSongs),[song]));}simulateRequest(SUCCESS_STATUS)(resolve);});};export var removeSong=function removeSong(song){return new Promise(function(resolve){var favoriteSongs=readFavoriteSongs();saveFavoriteSongs(favoriteSongs.filter(function(s){return s.trackId!==song.trackId;}));simulateRequest(SUCCESS_STATUS)(resolve);});};","map":{"version":3,"names":["FAVORITE_SONGS_KEY","TIMEOUT","SUCCESS_STATUS","JSON","parse","localStorage","getItem","setItem","stringify","readFavoriteSongs","saveFavoriteSongs","favoriteSongs","simulateRequest","response","callback","setTimeout","getFavoriteSongs","Promise","resolve","addSong","song","removeSong","filter","s","trackId"],"sources":["/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/services/favoriteSongsAPI.js"],"sourcesContent":["const FAVORITE_SONGS_KEY = 'favorite_songs';\nconst TIMEOUT = 500;\nconst SUCCESS_STATUS = 'OK';\n\nif (!JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY))) {\n  localStorage.setItem(FAVORITE_SONGS_KEY, JSON.stringify([]));\n}\nconst readFavoriteSongs = () => JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY));\n\nconst saveFavoriteSongs = (favoriteSongs) => localStorage\n  .setItem(FAVORITE_SONGS_KEY, JSON.stringify(favoriteSongs));\n\n// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso futuramente.\n// --------------------------------------------------------------------\n\nconst simulateRequest = (response) => (callback) => {\n  setTimeout(() => {\n    callback(response);\n  }, TIMEOUT);\n};\n\nexport const getFavoriteSongs = () => new Promise((resolve) => {\n  const favoriteSongs = readFavoriteSongs();\n  simulateRequest(favoriteSongs)(resolve);\n});\n\nexport const addSong = (song) => new Promise((resolve) => {\n  if (song) {\n    const favoriteSongs = readFavoriteSongs();\n    saveFavoriteSongs([...favoriteSongs, song]);\n  }\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n\nexport const removeSong = (song) => new Promise((resolve) => {\n  const favoriteSongs = readFavoriteSongs();\n  saveFavoriteSongs(favoriteSongs.filter((s) => s.trackId !== song.trackId));\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n"],"mappings":"4JAAA,GAAMA,mBAAkB,CAAG,gBAA3B,CACA,GAAMC,QAAO,CAAG,GAAhB,CACA,GAAMC,eAAc,CAAG,IAAvB,CAEA,GAAI,CAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,kBAArB,CAAX,CAAL,CAA2D,CACzDK,YAAY,CAACE,OAAb,CAAqBP,kBAArB,CAAyCG,IAAI,CAACK,SAAL,CAAe,EAAf,CAAzC,EACD,CACD,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,SAAMN,KAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,kBAArB,CAAX,CAAN,EAA1B,CAEA,GAAMU,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,aAAD,QAAmBN,aAAY,CACtDE,OAD0C,CAClCP,kBADkC,CACdG,IAAI,CAACK,SAAL,CAAeG,aAAf,CADc,CAAnB,EAA1B,CAGA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,QAAD,QAAc,UAACC,QAAD,CAAc,CAClDC,UAAU,CAAC,UAAM,CACfD,QAAQ,CAACD,QAAD,CAAR,CACD,CAFS,CAEPZ,OAFO,CAAV,CAGD,CAJuB,EAAxB,CAMA,MAAO,IAAMe,iBAAgB,CAAG,QAAnBA,iBAAmB,SAAM,IAAIC,QAAJ,CAAY,SAACC,OAAD,CAAa,CAC7D,GAAMP,cAAa,CAAGF,iBAAiB,EAAvC,CACAG,eAAe,CAACD,aAAD,CAAf,CAA+BO,OAA/B,EACD,CAHqC,CAAN,EAAzB,CAKP,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,CAACC,IAAD,QAAU,IAAIH,QAAJ,CAAY,SAACC,OAAD,CAAa,CACxD,GAAIE,IAAJ,CAAU,CACR,GAAMT,cAAa,CAAGF,iBAAiB,EAAvC,CACAC,iBAAiB,8BAAKC,aAAL,GAAoBS,IAApB,GAAjB,CACD,CACDR,eAAe,CAACV,cAAD,CAAf,CAAgCgB,OAAhC,EACD,CANgC,CAAV,EAAhB,CAQP,MAAO,IAAMG,WAAU,CAAG,QAAbA,WAAa,CAACD,IAAD,QAAU,IAAIH,QAAJ,CAAY,SAACC,OAAD,CAAa,CAC3D,GAAMP,cAAa,CAAGF,iBAAiB,EAAvC,CACAC,iBAAiB,CAACC,aAAa,CAACW,MAAd,CAAqB,SAACC,CAAD,QAAOA,EAAC,CAACC,OAAF,GAAcJ,IAAI,CAACI,OAA1B,EAArB,CAAD,CAAjB,CACAZ,eAAe,CAACV,cAAD,CAAf,CAAgCgB,OAAhC,EACD,CAJmC,CAAV,EAAnB"},"metadata":{},"sourceType":"module"}