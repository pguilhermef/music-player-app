{"ast":null,"code":"import _regeneratorRuntime from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Header from'../components/Header';import Loading from'../components/Loading';import{getUser,updateUser}from'../services/userAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileEdit=/*#__PURE__*/function(_Component){_inherits(ProfileEdit,_Component);var _super=_createSuper(ProfileEdit);function ProfileEdit(){var _this;_classCallCheck(this,ProfileEdit);_this=_super.call(this);_this.onChange=function(_ref){var target=_ref.target;var name=target.name,value=target.value;_this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));},function(){return _this.validateSubmit();});};_this.validateSubmit=function(){var _this$state=_this.state,name=_this$state.name,email=_this$state.email,image=_this$state.image,description=_this$state.description;console.log(name,email,image,description);var minLength=3;if([name.length,email.length,image.length,description.length].some(function(val){return val<minLength;})||!email.includes('@')&&!email.includes('.com')){return _this.setState({isSaveButtonDisabled:true});}_this.setState({isSaveButtonDisabled:false});};_this.onSaveClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _this$state2,name,email,image,description,history;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state2=_this.state,name=_this$state2.name,email=_this$state2.email,image=_this$state2.image,description=_this$state2.description;e.preventDefault();_context.next=4;return updateUser({name:name,email:email,image:image,description:description});case 4:history=_this.props.history;history.push('/profile');case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.loadingState=function(){return _this.setState(function(_ref3){var loading=_ref3.loading;return{loading:!loading};});};_this.state={loading:true,name:'',email:'',image:'',description:'',isSaveButtonDisabled:true};return _this;}_createClass(ProfileEdit,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this2=this;var user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUser();case 2:user=_context2.sent;this.setState({name:user.name,email:user.email||'',image:user.image||'',description:user.description||''},function(){_this2.loadingState();_this2.validateSubmit();});case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state3=this.state,loading=_this$state3.loading,name=_this$state3.name,email=_this$state3.email,image=_this$state3.image,description=_this$state3.description,isSaveButtonDisabled=_this$state3.isSaveButtonDisabled;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-profile-edit\",children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onClick,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",\"data-testid\":\"edit-input-name\",value:name,onChange:this.onChange}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",\"data-testid\":\"edit-input-email\",placeholder:\"\".concat(name.toLowerCase(),\"@email.com\"),value:email,onChange:this.onChange}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",cols:\"30\",rows:\"1\",\"data-testid\":\"edit-input-description\",placeholder:\"Eu sou o \".concat(name,\". Amo escutar m\\xFAsicas nesse site!\"),value:description,onChange:this.onChange}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"image\",\"data-testid\":\"edit-input-image\",value:image,onChange:this.onChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-testid\":\"edit-button-save\",onClick:this.onSaveClick,disabled:isSaveButtonDisabled,children:\"Editar perfil\"})]})]});}}]);return ProfileEdit;}(Component);export default ProfileEdit;","map":{"version":3,"names":["React","Component","Header","Loading","getUser","updateUser","ProfileEdit","onChange","target","name","value","setState","prevState","validateSubmit","state","email","image","description","console","log","minLength","length","some","val","includes","isSaveButtonDisabled","onSaveClick","e","preventDefault","history","props","push","loadingState","loading","user","onClick","toLowerCase"],"sources":["/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/pages/ProfileEdit.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getUser, updateUser } from '../services/userAPI';\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: true,\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      isSaveButtonDisabled: true,\n    };\n  }\n\n  async componentDidMount() {\n    const user = await getUser();\n    this.setState({\n      name: user.name,\n      email: user.email || '',\n      image: user.image || '',\n      description: user.description || '',\n    }, () => {\n      this.loadingState();\n      this.validateSubmit();\n    });\n  }\n\n  onChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState((prevState) => ({\n      ...prevState,\n      [name]: value }\n    ), () => this.validateSubmit());\n  }\n\n  validateSubmit = () => {\n    const {\n      name,\n      email,\n      image,\n      description,\n    } = this.state;\n    console.log(name, email, image, description);\n    const minLength = 3;\n    if ([name.length, email.length, image.length, description.length]\n      .some((val) => val < minLength)\n      || (!email.includes('@') && (!email.includes('.com')))) {\n      return this.setState({\n        isSaveButtonDisabled: true,\n      });\n    } this.setState({\n      isSaveButtonDisabled: false,\n    });\n  }\n\n  onSaveClick = async (e) => {\n    const { name, email, image, description } = this.state;\n    e.preventDefault();\n    await updateUser({ name, email, image, description });\n    const { history } = this.props;\n    history.push('/profile');\n  }\n\n  loadingState = () => this.setState(({ loading }) => ({ loading: !loading }));\n\n  render() {\n    const { loading, name, email, image, description, isSaveButtonDisabled } = this.state;\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <Header />\n        {loading ? <Loading /> : (\n          <form onSubmit={ this.onClick }>\n            <input\n              type=\"text\"\n              name=\"name\"\n              data-testid=\"edit-input-name\"\n              value={ name }\n              onChange={ this.onChange }\n            />\n            <input\n              type=\"email\"\n              name=\"email\"\n              data-testid=\"edit-input-email\"\n              placeholder={ `${name.toLowerCase()}@email.com` }\n              value={ email }\n              onChange={ this.onChange }\n            />\n            <textarea\n              name=\"description\"\n              cols=\"30\"\n              rows=\"1\"\n              data-testid=\"edit-input-description\"\n              placeholder={ `Eu sou o ${name}. Amo escutar mÃºsicas nesse site!` }\n              value={ description }\n              onChange={ this.onChange }\n            />\n            <input\n              type=\"url\"\n              name=\"image\"\n              data-testid=\"edit-input-image\"\n              value={ image }\n              onChange={ this.onChange }\n            />\n            <button\n              type=\"submit\"\n              data-testid=\"edit-button-save\"\n              onClick={ this.onSaveClick }\n              disabled={ isSaveButtonDisabled }\n            >\n              Editar perfil\n            </button>\n          </form>\n        )}\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default ProfileEdit;\n"],"mappings":"iqCAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,MAAOC,QAAP,KAAoB,uBAApB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,qBAApC,C,2FAEMC,Y,0GACJ,sBAAc,6CACZ,wBADY,MA0BdC,QA1Bc,CA0BH,cAAgB,IAAbC,OAAa,MAAbA,MAAa,CACzB,GAAQC,KAAR,CAAwBD,MAAxB,CAAQC,IAAR,CAAcC,KAAd,CAAwBF,MAAxB,CAAcE,KAAd,CACA,MAAKC,QAAL,CAAc,SAACC,SAAD,wCACTA,SADS,wBAEXH,IAFW,CAEJC,KAFI,IAAd,CAGG,iBAAM,OAAKG,cAAL,EAAN,EAHH,EAID,CAhCa,OAkCdA,cAlCc,CAkCG,UAAM,CACrB,gBAKI,MAAKC,KALT,CACEL,IADF,aACEA,IADF,CAEEM,KAFF,aAEEA,KAFF,CAGEC,KAHF,aAGEA,KAHF,CAIEC,WAJF,aAIEA,WAJF,CAMAC,OAAO,CAACC,GAAR,CAAYV,IAAZ,CAAkBM,KAAlB,CAAyBC,KAAzB,CAAgCC,WAAhC,EACA,GAAMG,UAAS,CAAG,CAAlB,CACA,GAAI,CAACX,IAAI,CAACY,MAAN,CAAcN,KAAK,CAACM,MAApB,CAA4BL,KAAK,CAACK,MAAlC,CAA0CJ,WAAW,CAACI,MAAtD,EACDC,IADC,CACI,SAACC,GAAD,QAASA,IAAG,CAAGH,SAAf,EADJ,GAEE,CAACL,KAAK,CAACS,QAAN,CAAe,GAAf,CAAD,EAAyB,CAACT,KAAK,CAACS,QAAN,CAAe,MAAf,CAFhC,CAE0D,CACxD,MAAO,OAAKb,QAAL,CAAc,CACnBc,oBAAoB,CAAE,IADH,CAAd,CAAP,CAGD,CAAC,MAAKd,QAAL,CAAc,CACdc,oBAAoB,CAAE,KADR,CAAd,EAGH,CApDa,OAsDdC,WAtDc,6FAsDA,iBAAOC,CAAP,uLACgC,MAAKb,KADrC,CACJL,IADI,cACJA,IADI,CACEM,KADF,cACEA,KADF,CACSC,KADT,cACSA,KADT,CACgBC,WADhB,cACgBA,WADhB,CAEZU,CAAC,CAACC,cAAF,GAFY,sBAGNvB,WAAU,CAAC,CAAEI,IAAI,CAAJA,IAAF,CAAQM,KAAK,CAALA,KAAR,CAAeC,KAAK,CAALA,KAAf,CAAsBC,WAAW,CAAXA,WAAtB,CAAD,CAHJ,QAIJY,OAJI,CAIQ,MAAKC,KAJb,CAIJD,OAJI,CAKZA,OAAO,CAACE,IAAR,CAAa,UAAb,EALY,sDAtDA,sEA8DdC,YA9Dc,CA8DC,iBAAM,OAAKrB,QAAL,CAAc,mBAAGsB,QAAH,OAAGA,OAAH,OAAkB,CAAEA,OAAO,CAAE,CAACA,OAAZ,CAAlB,EAAd,CAAN,EA9DD,CAGZ,MAAKnB,KAAL,CAAa,CACXmB,OAAO,CAAE,IADE,CAEXxB,IAAI,CAAE,EAFK,CAGXM,KAAK,CAAE,EAHI,CAIXC,KAAK,CAAE,EAJI,CAKXC,WAAW,CAAE,EALF,CAMXQ,oBAAoB,CAAE,IANX,CAAb,CAHY,aAWb,C,qJAED,0LACqBrB,QAAO,EAD5B,QACQ8B,IADR,gBAEE,KAAKvB,QAAL,CAAc,CACZF,IAAI,CAAEyB,IAAI,CAACzB,IADC,CAEZM,KAAK,CAAEmB,IAAI,CAACnB,KAAL,EAAc,EAFT,CAGZC,KAAK,CAAEkB,IAAI,CAAClB,KAAL,EAAc,EAHT,CAIZC,WAAW,CAAEiB,IAAI,CAACjB,WAAL,EAAoB,EAJrB,CAAd,CAKG,UAAM,CACP,MAAI,CAACe,YAAL,GACA,MAAI,CAACnB,cAAL,GACD,CARD,EAFF,6D,mIAmDA,iBAAS,CACP,iBAA2E,KAAKC,KAAhF,CAAQmB,OAAR,cAAQA,OAAR,CAAiBxB,IAAjB,cAAiBA,IAAjB,CAAuBM,KAAvB,cAAuBA,KAAvB,CAA8BC,KAA9B,cAA8BA,KAA9B,CAAqCC,WAArC,cAAqCA,WAArC,CAAkDQ,oBAAlD,cAAkDA,oBAAlD,CACA,mBACE,aAAK,cAAY,mBAAjB,wBACE,KAAC,MAAD,IADF,CAEGQ,OAAO,cAAG,KAAC,OAAD,IAAH,cACN,cAAM,QAAQ,CAAG,KAAKE,OAAtB,wBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,cAAY,iBAHd,CAIE,KAAK,CAAG1B,IAJV,CAKE,QAAQ,CAAG,KAAKF,QALlB,EADF,cAQE,cACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,cAAY,kBAHd,CAIE,WAAW,WAAME,IAAI,CAAC2B,WAAL,EAAN,cAJb,CAKE,KAAK,CAAGrB,KALV,CAME,QAAQ,CAAG,KAAKR,QANlB,EARF,cAgBE,iBACE,IAAI,CAAC,aADP,CAEE,IAAI,CAAC,IAFP,CAGE,IAAI,CAAC,GAHP,CAIE,cAAY,wBAJd,CAKE,WAAW,oBAAeE,IAAf,wCALb,CAME,KAAK,CAAGQ,WANV,CAOE,QAAQ,CAAG,KAAKV,QAPlB,EAhBF,cAyBE,cACE,IAAI,CAAC,KADP,CAEE,IAAI,CAAC,OAFP,CAGE,cAAY,kBAHd,CAIE,KAAK,CAAGS,KAJV,CAKE,QAAQ,CAAG,KAAKT,QALlB,EAzBF,cAgCE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,kBAFd,CAGE,OAAO,CAAG,KAAKmB,WAHjB,CAIE,QAAQ,CAAGD,oBAJb,2BAhCF,GAHJ,GADF,CAgDD,C,yBAnHuBxB,S,EA4H1B,cAAeK,YAAf"},"metadata":{},"sourceType":"module"}