{"ast":null,"code":"var _jsxFileName = \"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/components/MusicCard.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, removeSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MusicCard extends Component {\n  constructor() {\n    super();\n\n    this.isChecked = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        albumMusics,\n        index\n      } = this.props;\n\n      if (target.checked) {\n        this.setState({\n          isChecked: true,\n          loading: true\n        }, async () => {\n          await addSong(albumMusics[index]);\n          this.setState({\n            loading: false\n          });\n        });\n      } else {\n        this.setState({\n          isChecked: false,\n          loading: true\n        }, async () => {\n          await removeSong(albumMusics[index]);\n          this.setState({\n            loading: false\n          }, () => {\n            const {\n              checkFavorite\n            } = this.props;\n            checkFavorite();\n          });\n        });\n      }\n    };\n\n    this.state = {\n      loading: false,\n      isChecked: false\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      trackId\n    } = this.props;\n    const getList = await getFavoriteSongs();\n    const isChecked = getList.some(music => music.trackId === trackId);\n    this.setState({\n      loading: true,\n      isChecked\n    }, () => this.setState({\n      loading: false\n    }));\n  }\n\n  render() {\n    const {\n      loading,\n      isChecked\n    } = this.state;\n    const {\n      trackName,\n      previewUrl,\n      trackId\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 24\n        }, this) : trackName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        \"data-testid\": \"audio-component\",\n        src: previewUrl,\n        controls: true,\n        children: [/*#__PURE__*/_jsxDEV(\"track\", {\n          kind: \"captions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), \"O seu navegador n\\xE3o suporta o elemento\", previewUrl, /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"audio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: trackId,\n        \"data-testid\": `checkbox-music-${trackId}`,\n        children: [\"Favorita\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          name: \"favorites\",\n          id: trackId,\n          onChange: this.isChecked,\n          checked: isChecked\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nMusicCard.propTypes = {\n  trackName: PropTypes.string.isRequired,\n  previewUrl: PropTypes.string.isRequired,\n  trackId: PropTypes.number.isRequired,\n  albumMusics: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\n  index: PropTypes.number.isRequired,\n  checkFavorite: PropTypes.func\n};\nMusicCard.defaultProps = {\n  checkFavorite: () => {}\n};\nexport default MusicCard;","map":{"version":3,"names":["React","Component","PropTypes","addSong","removeSong","getFavoriteSongs","Loading","MusicCard","constructor","isChecked","target","albumMusics","index","props","checked","setState","loading","checkFavorite","state","componentDidMount","trackId","getList","some","music","render","trackName","previewUrl","propTypes","string","isRequired","number","arrayOf","object","func","defaultProps"],"sources":["/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/components/MusicCard.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, removeSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\n\nclass MusicCard extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: false,\n      isChecked: false,\n    };\n  }\n\n  async componentDidMount() {\n    const { trackId } = this.props;\n    const getList = await getFavoriteSongs();\n    const isChecked = getList.some((music) => music.trackId === trackId);\n    this.setState({ loading: true, isChecked }, () => this.setState({ loading: false }));\n  }\n\n  isChecked = ({ target }) => {\n    const { albumMusics, index } = this.props;\n    if (target.checked) {\n      this.setState({ isChecked: true, loading: true }, async () => {\n        await addSong(albumMusics[index]);\n        this.setState({ loading: false });\n      });\n    } else {\n      this.setState({ isChecked: false, loading: true }, async () => {\n        await removeSong(albumMusics[index]);\n        this.setState({ loading: false }, () => {\n          const { checkFavorite } = this.props;\n          checkFavorite();\n        });\n      });\n    }\n  }\n\n  render() {\n    const { loading, isChecked } = this.state;\n    const { trackName, previewUrl, trackId } = this.props;\n    return (\n      <div>\n        <h4>{loading ? <Loading /> : trackName}</h4>\n        <audio\n          data-testid=\"audio-component\"\n          src={ previewUrl }\n          controls\n        >\n          <track kind=\"captions\" />\n          O seu navegador n√£o suporta o elemento\n          {previewUrl}\n          <code>\n            audio\n          </code>\n          .\n        </audio>\n        <label htmlFor={ trackId } data-testid={ `checkbox-music-${trackId}` }>\n          Favorita\n          <input\n            type=\"checkbox\"\n            name=\"favorites\"\n            id={ trackId }\n            onChange={ this.isChecked }\n            checked={ isChecked }\n          />\n        </label>\n      </div>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  trackName: PropTypes.string.isRequired,\n  previewUrl: PropTypes.string.isRequired,\n  trackId: PropTypes.number.isRequired,\n  albumMusics: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\n  index: PropTypes.number.isRequired,\n  checkFavorite: PropTypes.func,\n};\n\nMusicCard.defaultProps = {\n  checkFavorite: () => {},\n};\n\nexport default MusicCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}