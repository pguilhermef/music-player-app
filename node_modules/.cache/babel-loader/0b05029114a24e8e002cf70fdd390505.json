{"ast":null,"code":"var _jsxFileName = \"/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/pages/ProfileEdit.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getUser, updateUser } from '../services/userAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n\n    this.onChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState(prevState => ({ ...prevState,\n        [name]: value\n      }), () => this.validateSubmit());\n    };\n\n    this.validateSubmit = () => {\n      const {\n        name,\n        email,\n        image,\n        description\n      } = this.state;\n      console.log(name, email, image, description);\n      const minLength = 3;\n\n      if ([name.length, email.length, image.length, description.length].some(val => val < minLength) || !email.includes('@') && !email.includes('.com')) {\n        return this.setState({\n          isSaveButtonDisabled: true\n        });\n      }\n\n      this.setState({\n        isSaveButtonDisabled: false\n      });\n    };\n\n    this.onSaveClick = async e => {\n      const {\n        name,\n        email,\n        image,\n        description\n      } = this.state;\n      e.preventDefault();\n      await updateUser({\n        name,\n        email,\n        image,\n        description\n      });\n      const {\n        history\n      } = this.props;\n      history.push('/profile');\n    };\n\n    this.loadingState = () => this.setState(_ref2 => {\n      let {\n        loading\n      } = _ref2;\n      return {\n        loading: !loading\n      };\n    });\n\n    this.state = {\n      loading: true,\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      isSaveButtonDisabled: true\n    };\n  }\n\n  async componentDidMount() {\n    const user = await getUser();\n    this.setState({\n      name: user.name,\n      email: user.email || '',\n      image: user.image || '',\n      description: user.description || ''\n    }, () => {\n      this.loadingState();\n      this.validateSubmit();\n    });\n  }\n\n  render() {\n    const {\n      loading,\n      name,\n      email,\n      image,\n      description,\n      isSaveButtonDisabled\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-profile-edit\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.onClick,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          \"data-testid\": \"edit-input-name\",\n          value: name,\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          \"data-testid\": \"edit-input-email\",\n          placeholder: `${name.toLowerCase()}@email.com`,\n          value: email,\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          cols: \"30\",\n          rows: \"5\",\n          \"data-testid\": \"edit-input-description\",\n          placeholder: `Eu sou o ${name}. Amo escutar músicas nesse site!`,\n          value: description,\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"url\",\n          name: \"image\",\n          \"data-testid\": \"edit-input-image\",\n          value: image,\n          onChange: this.onChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          \"data-testid\": \"edit-button-save\",\n          onClick: this.onSaveClick,\n          disabled: isSaveButtonDisabled,\n          children: \"Editar perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired\n};\nexport default ProfileEdit;","map":{"version":3,"names":["React","Component","PropTypes","Header","Loading","getUser","updateUser","ProfileEdit","constructor","onChange","target","name","value","setState","prevState","validateSubmit","email","image","description","state","console","log","minLength","length","some","val","includes","isSaveButtonDisabled","onSaveClick","e","preventDefault","history","props","push","loadingState","loading","componentDidMount","user","render","onClick","toLowerCase","propTypes","shape","func","isRequired"],"sources":["/home/paulo-guilherme-dev/projetos/sd-023-b-project-trybetunes/src/pages/ProfileEdit.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getUser, updateUser } from '../services/userAPI';\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: true,\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      isSaveButtonDisabled: true,\n    };\n  }\n\n  async componentDidMount() {\n    const user = await getUser();\n    this.setState({\n      name: user.name,\n      email: user.email || '',\n      image: user.image || '',\n      description: user.description || '',\n    }, () => {\n      this.loadingState();\n      this.validateSubmit();\n    });\n  }\n\n  onChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState((prevState) => ({\n      ...prevState,\n      [name]: value }\n    ), () => this.validateSubmit());\n  }\n\n  validateSubmit = () => {\n    const {\n      name,\n      email,\n      image,\n      description,\n    } = this.state;\n    console.log(name, email, image, description);\n    const minLength = 3;\n    if ([name.length, email.length, image.length, description.length]\n      .some((val) => val < minLength)\n      || (!email.includes('@') && (!email.includes('.com')))) {\n      return this.setState({\n        isSaveButtonDisabled: true,\n      });\n    } this.setState({\n      isSaveButtonDisabled: false,\n    });\n  }\n\n  onSaveClick = async (e) => {\n    const { name, email, image, description } = this.state;\n    e.preventDefault();\n    await updateUser({ name, email, image, description });\n    const { history } = this.props;\n    history.push('/profile');\n  }\n\n  loadingState = () => this.setState(({ loading }) => ({ loading: !loading }));\n\n  render() {\n    const { loading, name, email, image, description, isSaveButtonDisabled } = this.state;\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <Header />\n        {loading ? <Loading /> : (\n          <form onSubmit={ this.onClick }>\n            <input\n              type=\"text\"\n              name=\"name\"\n              data-testid=\"edit-input-name\"\n              value={ name }\n              onChange={ this.onChange }\n            />\n            <input\n              type=\"email\"\n              name=\"email\"\n              data-testid=\"edit-input-email\"\n              placeholder={ `${name.toLowerCase()}@email.com` }\n              value={ email }\n              onChange={ this.onChange }\n            />\n            <textarea\n              name=\"description\"\n              cols=\"30\"\n              rows=\"5\"\n              data-testid=\"edit-input-description\"\n              placeholder={ `Eu sou o ${name}. Amo escutar músicas nesse site!` }\n              value={ description }\n              onChange={ this.onChange }\n            />\n            <input\n              type=\"url\"\n              name=\"image\"\n              data-testid=\"edit-input-image\"\n              value={ image }\n              onChange={ this.onChange }\n            />\n            <button\n              type=\"submit\"\n              data-testid=\"edit-button-save\"\n              onClick={ this.onSaveClick }\n              disabled={ isSaveButtonDisabled }\n            >\n              Editar perfil\n            </button>\n          </form>\n        )}\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default ProfileEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}